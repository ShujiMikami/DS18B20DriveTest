One-Wireメモ
2018/7/12
  まずは, usec単位でのwait_us関数を作り, byte送受信の準備を行った.
  最初, 非常に安易に, asm("NOP")を使用する方法で作成したが, まったく思い通りの動きをしなかった. 
  NOPで計算するより, だいぶ長い. 話にならないほど. 
  引き続いて, NOPを一切無くし, ただGPIOの上下だけを動かしたところ, それでも5usec程度かかってしまった. 
  とりあえず, 時間だけでもなんとかしようと, TIMで待ちを発生させることに.
  待つ前に, TIMのカウンタをクリアし, 所望の時間のカウンタ値になるまで待つ.
  関数としては, __HAL_TIM_SET_COUNTERという関数と, __HAL_TIM_GET_COUNTERといういかにもな名前の関数があった. 
  これで実装したところ, なぜかぴったりと合うようになった. GPIO連発したときのタイムラグも消えている. クロックが遅いせいだとしても, 1usecもずれないはずなので, 計算が合わない. とりあえず保留しとく. 

